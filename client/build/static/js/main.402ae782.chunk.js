(this["webpackJsonpecommerce-frontend"]=this["webpackJsonpecommerce-frontend"]||[]).push([[0],{30:function(e,t,a){},32:function(e,t,a){e.exports=a.p+"static/media/Logo.c6c56704.png"},34:function(e,t,a){e.exports=a.p+"static/media/banner-book.2cf5c429.jpg"},37:function(e,t,a){e.exports=a(53)},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),o=a(3),s=a(6),m=a(7),i="http://localhost:8000/api",u=function(){return!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt"))};var d=function(e){var t=e.children,a=Object(m.a)(e,["children"]);return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return u()&&1===u().user.role?t:r.a.createElement(s.a,{to:"/"})}}))};var p=function(e){var t=e.children,a=Object(m.a)(e,["children"]);return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return u()?t:r.a.createElement(s.a,{to:{pathname:"/signin"}})}}))},E=a(2),f=(a(30),a(32)),h=a.n(f),b=a(4),g=Object(b.b)((function(e){return{items:e.products}}),{})((function(e){var t=Object(n.useState)(),a=Object(E.a)(t,2),c=a[0],l=a[1];Object(n.useEffect)((function(){return window.addEventListener("scroll",d),l(u().user),function(){window.removeEventListener("scroll",d)}}),[]);var s=Object(n.useRef)(),m=window.scrollY,d=function(){window.scrollY-m>=0?s.current.style.transform="translateY(-100%)":s.current.style.transform="translateY(0%)",m=window.scrollY};return r.a.createElement("nav",{ref:s,className:"navbar navbar-expand-lg navbar-light bg-light justify-content-end py-2",style:{backgroundImage:"linear-gradient(90deg,#00c4cc,#7d2ae8)"}},r.a.createElement(o.c,{to:"/",exact:!0,className:"navbar-brand mr-auto",style:{height:"100%"},href:"#"},r.a.createElement("img",{src:h.a,style:{height:"2.5rem"}})),r.a.createElement(o.c,{to:"/",exact:!0,className:"nav-link text-light light-border rounded mx-1 ",activeStyle:{backgroundColor:"hsla(0,0%,100%,.1)"}},"Home"),r.a.createElement(o.c,{to:"/shop",className:"nav-link text-light light-border rounded mx-1",activeStyle:{backgroundColor:"hsla(0,0%,100%,.1)"}},"Shop"),r.a.createElement(o.c,{to:"/cart",className:"nav-link text-light light-border rounded mx-1",activeStyle:{backgroundColor:"hsla(0,0%,100%,.1)"}},"Cart\xa0",r.a.createElement("span",{className:"badge badge-light"},e.items.length?e.items.length:"")),c&&0===c.role&&r.a.createElement(o.c,{to:"/user/dashboard",className:"nav-link text-light light-border rounded mx-1",activeStyle:{backgroundColor:"hsla(0,0%,100%,.1)"}},"Dashboard"),c&&1===c.role&&r.a.createElement(o.c,{to:"/admin/dashboard",className:"nav-link text-light light-border rounded mx-1",activeStyle:{backgroundColor:"hsla(0,0%,100%,.1)"}},"Dashboard"),c?"":r.a.createElement(r.a.Fragment,null,r.a.createElement(o.c,{to:"/signup",className:"nav-link text-light light-border rounded mx-1",activeStyle:{backgroundColor:"hsla(0,0%,100%,.1)"}},"Sign Up"),r.a.createElement(o.c,{to:"/signin",className:"nav-link text-light light-border rounded mx-1",activeStyle:{backgroundColor:"hsla(0,0%,100%,.1)"}},"Sign In")),c?r.a.createElement(o.c,{to:"/",className:"nav-link text-light light-border rounded mx-1",onClick:function(){"undefined"!==typeof window&&(localStorage.removeItem("jwt"),fetch("".concat(i,"/signout"),{method:"GET"})),l(null)}},"Sign Out"):"")})),v=a(34),N=a.n(v);var y=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container-fluid footer bg-dark text-light pt-3 mt-3"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4 col-sm-6"},r.a.createElement("h4",{style:{borderBottom:"1px solid #9999",paddingBottom:"5px",marginRight:"50%"}},"About Me"),r.a.createElement("p",{className:"dia-chi"},"\u0110\u1ecba ch\u1ec9: To\xe0 Nh\xe0 D06, T\u1ea7ng 4, Ph\xf2ng 02, Ph\u01b0\u1eddng \u0110\xf4ng H\xf2a , Th\u1ecb X\xe3 D\u0129 An, T\u1ec9nh B\xecnh D\u01b0\u01a1ng."),r.a.createElement("p",{className:"so-dien-thoai"},"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: 0961122936"),r.a.createElement("p",{className:"person-email"},"Email: vuducvi20@gmail.com"),r.a.createElement("p",{style:{wordBreak:"break-all"}},"Facebook:\xa0",r.a.createElement("a",{href:"https://www.facebook.com/vuducvipandan",target:"_blank"},"https://www.facebook.com/vuducvipandan"))),r.a.createElement("div",{className:"col-md-4 col-sm-6"},r.a.createElement("h4",{style:{borderBottom:"1px solid #9999",paddingBottom:"5px",marginRight:"50%"}},"Admin account"),r.a.createElement("p",null,"L\u01b0u \xfd: \u0111\u1eebng \u0111\u1ed5i m\u1eadt kh\u1ea9u admin"),r.a.createElement("p",null,"Email: vuducvi20@gmail.com"),r.a.createElement("p",null,"Pasword: 1234")),r.a.createElement("div",{className:"col-md-4 col-sm-6"},r.a.createElement("h4",{style:{borderBottom:"1px solid #9999",paddingBottom:"5px",marginRight:"20%"}},"About Ecommerce"),r.a.createElement("p",null,"Ch\u1ee9c n\u0103ng thanh to\xe1n ch\u1ec9 c\xf3 COD"),r.a.createElement("p",null,"S\u1ea3n ph\u1ea9m \u1edf New Arrival kh\xf4ng \u0111\u1ed3ng b\u1ed9 v\u1edbi Best Sell"))))),r.a.createElement("div",{className:"col-12 text-center py-2",style:{backgroundColor:"#888"}},"2020 Person Project."))};var O=function(e){var t=e.banner,a=void 0!==t&&t,c=e.marginTop,l=void 0===c||c,o=e.reload,s=void 0===o||o,m=e.children,i=e.className,u=Object(n.useRef)();return Object(n.useEffect)((function(){s&&window.scrollTo(0,0)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navbar-container",ref:u},r.a.createElement(g,null)),a?r.a.createElement("div",{className:"text-center banner",style:{backgroundImage:"url("+N.a+")",backgroundSize:"cover",backgroundPosition:"top left",paddingTop:"20vh",color:"#fff",marginBottom:"1rem"}},r.a.createElement("h1",{className:"title-banner"},"Welcome to AnhViPanDan shop"),r.a.createElement("span",{className:"title-banner",style:{padding:"0 2rem 1rem 2rem",borderBottom:"2px solid #fff",fontSize:"2rem"}},"All products is free")):"",r.a.createElement("div",{style:l?{paddingTop:"2rem",minHeight:"calc(100vh - ".concat(u.current?u.current.offsetHeight:0,"px)")}:{},className:i},m),r.a.createElement(y,null))},j=JSON.parse(localStorage.getItem("cart")),S=function(e){return function(t,a){return a().products.find((function(t){return t._id===e._id}))?void 0:(t({type:"ADD_TO_CART",payload:e}),void function(e){if(j){if(j.find((function(t){return t._id===e._id})))return;j.push(e),localStorage.setItem("cart",JSON.stringify(j))}else localStorage.setItem("cart",JSON.stringify([e]))}(e))}},w=function(e){return function(t,a){var n,r=a().products;t({type:"REMOVE_FROM_CART",payload:r=r.filter((function(t){return t._id!==e._id}))}),n=e._id,j&&(j=j.filter((function(e){return e._id!==n})),localStorage.setItem("cart",JSON.stringify(j)))}},k=function(e,t){return function(a,n){var r=n().products;a({type:"UPDATE_ITEMS",payload:r=r.map((function(a){return a._id===e&&(a.quantity=t||0),a}))}),function(e,t){j&&(j.map((function(a){if(a._id===e)return a.quantity=t,a})),localStorage.setItem("cart",JSON.stringify(j)))}(e,t||0)}},x=function(e){return function(t){t({type:"LOAD_REVIEWS",payload:e})}},C=a(1),_=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return fetch("".concat(i,"/products/by/search"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filters:a,limit:e,skip:t})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))};var T=Object(b.b)((function(e){return{items:e.products}}),{resetItems:function(){return function(e){e({type:"RESET_ITEMS",payload:[]}),localStorage.setItem("cart",JSON.stringify([]))}}})((function(e){var t=e.items,a=Object(m.a)(e,["items"]),c=u(),l=c.user,s=c.token,d=Object(n.useState)({address:"",sdt:"",err:"",success:!1}),p=Object(E.a)(d,2),f=p[0],h=p[1],b=f.address,g=f.sdt;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"info-checkout"},r.a.createElement("label",null,r.a.createElement("input",{type:"radio",checked:!0}),r.a.createElement("span",{className:"ml-2"},"Cash on delivery (COD)")),r.a.createElement("label",{className:"d-block"},r.a.createElement("input",{type:"radio",disabled:!0}),r.a.createElement("span",{className:"ml-2 text-muted"},"Online payment (unavailable)"),r.a.createElement("span",{className:"text-info ml-2"},"\u24d8"," ",r.a.createElement("span",{className:"text-danger small"},"Sory, we haven't update this feature"))),r.a.createElement(r.a.Fragment,null,f.err?r.a.createElement("div",{className:"h5 text-danger pb-2"},f.err):""),r.a.createElement(r.a.Fragment,null,f.success?r.a.createElement("div",{className:"h5 text-success pb-2"},"Process Success"):""),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0===t.length||t.find((function(e){return 0===e.quantity}))?h(Object(C.a)(Object(C.a)({},f),{},{success:!1,err:"Couldn't process empty product "})):function(e,t,a){return fetch("".concat(i,"/order/create/").concat(e),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({order:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(l._id,s,{products:t,amount:t.reduce((function(e,t){return e+t.quantity*t.price}),0),address:b,user:l,sdt:g}).then((function(e){e.err?h(Object(C.a)(Object(C.a)({},f),{},{err:e.err})):(h({address:"",sdt:"",err:"",success:!0}),a.resetItems())}))}},r.a.createElement("label",{className:"font-weight-light text-muted d-block"},"Delivery Address",r.a.createElement("textarea",{className:"form-control mt-2",placeholder:"Ex: Khu 4B, Thi Tran Con, Hai Hau, Nam Dinh",value:b,onChange:function(e){h(Object(C.a)(Object(C.a)({},f),{},{address:e.target.value})),console.log(a.location)}})),r.a.createElement("label",{className:"font-weight-light text-muted d-block"},"Phone contact",r.a.createElement("input",{type:"text",className:"form-control mt-2",value:g,onChange:function(e){return h(Object(C.a)(Object(C.a)({},f),{},{sdt:e.target.value}))}})),u()?r.a.createElement("button",{className:"btn btn-success",type:"submit"},"Checkout"):r.a.createElement(o.b,{to:{pathname:"/signin",state:{prevPath:a.location.pathname}}},r.a.createElement("button",{className:"btn btn-primary"},"Sign in to process")))))}));var A=Object(b.b)((function(e){return{items:e.products}}),{updateItems:k,removeFromCart:w})(Object(n.memo)((function(e){var t=e.items,a=Object(m.a)(e,["items"]),c=Object(n.useState)(),l=Object(E.a)(c,2),s=l[0],u=l[1];return Object(n.useEffect)((function(){u(t.reduce((function(e,t){return e+t.quantity*t.price}),0))}),[t]),r.a.createElement(O,{description:"Manage your added product",title:"Cart",className:"container-fluid"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-md-7 col-sm-12 px-3"},r.a.createElement("h3",null,"Your cart has ",t.length," items"),t.map((function(e){return n=e,r.a.createElement("div",{className:"d-flex py-2 ",key:n._id,style:{fontFamily:"Raleway, sans-serif",padding:"0 1rem",alignItems:"center",borderBottom:"1px solid gray",margin:"1rem 0"}},r.a.createElement(o.b,{to:{pathname:"/product/".concat(n._id)},className:"image-container-cart"},r.a.createElement("img",{src:"".concat(i,"/product/photo/").concat(n._id),className:"image-product-cart",alt:n.name})),r.a.createElement("div",{className:"info-product-cart"},r.a.createElement("p",{className:"product-name-cart"},n.name),r.a.createElement("p",{className:"product-price-cart"},"$",r.a.createElement("span",null,n.price))),r.a.createElement("div",{className:"calculate-product-cart"},r.a.createElement("div",{className:"crement crement-cart"},r.a.createElement("button",{className:"decre decre-cart",onClick:function(){a.updateItems(n._id,n.quantity-1<0?0:n.quantity-1),u(t.reduce((function(e,t){return e+t.quantity*t.price}),0))}},"-"),r.a.createElement("input",{type:"number",className:"input-total input-total-cart",value:n.quantity?n.quantity:0,name:"total",onChange:function(e){a.updateItems(n._id,parseInt(e.target.value)),u(t.reduce((function(e,t){return e+t.quantity*t.price}),0))}}),r.a.createElement("button",{className:"incre incre-cart",onClick:function(){a.updateItems(n._id,n.quantity+1),u(t.reduce((function(e,t){return e+t.quantity*t.price}),0))}},"+")),r.a.createElement("div",{className:"item-price-cart"},"$\xa0",n.quantity*n.price),r.a.createElement("button",{className:"btn-remove-cart",onClick:function(){a.removeFromCart(n)}},"\xd7")));var n})),r.a.createElement("div",{className:"total-price-cart"},r.a.createElement("p",null,"Total:\xa0$",s," "))),r.a.createElement("div",{className:"col-md-5 px-3 col-sm-12"},r.a.createElement("h3",{style:{marginBottom:"1rem"}},"Checkout"),r.a.createElement(T,{location:a.location}))))}))),D=function(){return fetch("".concat(i,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},I=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?a:3&a|8).toString(16)}));return t};var R=function(e){var t=e.className,a=e.childClassName,c=e.childStyle,l=e.size,o=e.hover,s=void 0!==o&&o,m=e.color,i=void 0===m?"#ffd700":m,u=e.onChange,d=e.rate,p=void 0===d?2:d,f=Object(n.useState)(0),h=Object(E.a)(f,2),b=h[0],g=h[1];Object(n.useEffect)((function(){return g(p)}),[]);var v=function(e){g(e+.5)},N=function(e){g(e+1)},y=function(){g(p)};return r.a.createElement("div",{className:"d-flex ".concat(t),style:{fontSize:"".concat(l),color:"".concat(i)}},[0,1,2,3,4].map((function(e){return e+.5<b?r.a.createElement("span",{key:I()},r.a.createElement("i",{style:Object(C.a)({},c),className:"fa fa-star container-star ".concat(a),"aria-hidden":"true"},r.a.createElement("div",{className:"left-star",onMouseOver:function(){return s?v(e):null},onMouseOut:s?y:null,onClick:s?function(){u(b),g(b)}:null}),r.a.createElement("div",{className:"right-star",onMouseOver:function(){return s?N(e):null},onMouseOut:y,onClick:s?function(){u(b),g(b)}:null}))):e+.5>=b&&b>e?r.a.createElement("span",{key:I()},r.a.createElement("i",{style:Object(C.a)({},c),className:"fa fa-star-half-o container-star ".concat(a),"aria-hidden":"true"},r.a.createElement("div",{className:"left-star",onMouseOver:function(){return s?v(e):null},onMouseOut:s?y:null,onClick:s?function(){u(b),g(b)}:null}),r.a.createElement("div",{className:"right-star",onMouseOver:function(){return s?N(e):null},onMouseOut:s?y:null,onClick:s?function(){u(b),g(b)}:null}))):r.a.createElement("span",{key:I()},r.a.createElement("i",{style:Object(C.a)({},c),className:"fa fa-star-o container-star ".concat(a),"aria-hidden":"true"},r.a.createElement("div",{className:"left-star",onMouseOver:function(){return s?v(e):null},onMouseOut:s?y:null,onClick:s?function(){u(b),g(b)}:null}),r.a.createElement("div",{className:"right-star",onMouseOver:function(){return s?N(e):null},onMouseOut:s?y:null,onClick:s?function(){u(b),g(b)}:null})))})))},P=Object(b.b)((function(e){return{items:e.products}}),{addToCart:S,removeFromCart:w})(Object(n.memo)((function(e){var t=e.product,a=e.isAdded,c=Object(m.a)(e,["product","isAdded"]),l=Object(n.useState)(a),s=Object(E.a)(l,2),u=s[0],d=s[1];Object(n.useEffect)((function(){d(!!c.items.find((function(e){return e._id===t._id})))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"padding-product"},r.a.createElement("div",{className:"product-card"},r.a.createElement(o.b,{className:"d-inline-block",to:{pathname:"/product/".concat(t._id)}},r.a.createElement("div",{className:"image-container-card",style:{backgroundImage:"url(".concat(i,"/product/photo/").concat(t._id,")")}},r.a.createElement("div",{className:"image-card"},r.a.createElement("div",{className:"image-product-card"})))),r.a.createElement("div",{className:"detail-card"},r.a.createElement("p",{className:"product-name-card"},t.name),r.a.createElement("p",{className:"product-price-card"},"$",r.a.createElement("span",null,t.price)),r.a.createElement("div",{className:"rate-card"},r.a.createElement(R,{className:"py-2",rate:0!==t.rate.length?t.rate.reduce((function(e,t){return e+t.rate}),0)/t.rate.length:0})),r.a.createElement("p",{className:"product-category-card d-inline-block"},"Category: \xa0"),r.a.createElement("h3",{className:"product-category-h3"},t.category.name),u?r.a.createElement("button",{className:"btn-remove-card mt-3",onClick:function(){c.removeFromCart(t),d(!1)}},"REMOVE FROM CART"):r.a.createElement("button",{className:"btn-buy-card mt-3",onClick:function(){c.addToCart(t),d(!0)}},"ADD TO CART")))))}))),F=a(11);var M=function(e){var t=e.categories,a=Object(n.useState)({category:"",name:"",products:[],err:""}),c=Object(E.a)(a,2),l=c[0],o=c[1],s=l.category,m=l.name,u=Object(n.useState)(0),d=Object(E.a)(u,2),p=d[0],f=d[1],h=function(e){o(Object(C.a)(Object(C.a)({},l),{},Object(F.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"mb-3"},"Search"),r.a.createElement("form",{className:"row no-gutters",onSubmit:function(e){e.preventDefault(),function(e){var t=e.name,a=e.category;return fetch("".concat(i,"/products"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,category:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}({name:m,category:s}).then((function(e){return console.log(e),e.err||0===e.length?o(Object(C.a)(Object(C.a)({},l),{},{products:[],err:e.err||"Products not found"})):o(Object(C.a)(Object(C.a)({},l),{},{err:"",products:e}))}))}},r.a.createElement("div",{className:"input-group input-group-lg col-10 pr-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("select",{className:"input-group-text",name:"category",onChange:h,value:l.category},r.a.createElement("option",{value:""},"All"),t?t.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)})):"")),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search for name",name:"name",onChange:h,value:l.name})),r.a.createElement("div",{className:"col-2"},r.a.createElement("button",{className:"btn btn-info btn-block btn-lg"},"Search"))),r.a.createElement("div",{className:"row my-3"},0!==l.products.length&&r.a.createElement(r.a.Fragment,null,l.products.slice(0,p+8).map((function(e){return r.a.createElement("div",{className:"col-lg-3 col-md-4 col-sm-6 mb-3",key:e._id},r.a.createElement(P,{key:e._id,product:e}))})),p+8<l.products.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{className:"btn btn-info",onClick:function(){return f(p+8)}},"Load More"))):""),0===l.products.length&&(l.err?r.a.createElement("h3",{className:"text-danger col-12"},r.a.createElement("div",{className:"bg-light rounded p-3"},l.err," ")):r.a.createElement("h3",{className:"text-info col-12"},r.a.createElement("div",{className:"bg-light rounded p-3"},"You haven't search ")))))};var L=Object(b.b)((function(e){return{items:e.products,arrival:e.arrival,sell:e.sell}}),{loadProducts:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desc",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return function(n,r){fetch("".concat(i,"/products?sortBy=").concat(e,"&order=").concat(t,"&limit=").concat(a),{method:"GET"}).then((function(e){return e.json()})).then((function(t){n("createdAt"===e?{type:"ARRIVAL_ITEMS",payload:t}:{type:"SELL_ITEMS",payload:t})})).catch((function(e){return console.log(e)}))}}})((function(e){e.items;var t=e.arrival,a=e.sell,c=Object(m.a)(e,["items","arrival","sell"]),l=Object(n.useState)({bySell:[],byArrival:[],categories:[],err:!1}),o=Object(E.a)(l,2),s=o[0],i=o[1],u=Object(n.useState)(0),d=Object(E.a)(u,2),p=d[0],f=d[1],h=Object(n.useState)(0),b=Object(E.a)(h,2),g=b[0],v=b[1];return Object(n.useEffect)((function(){c.loadProducts("createdAt"),c.loadProducts("sold"),D().then((function(e){i(Object(C.a)(Object(C.a)({},s),{},{categories:e}))}))}),[]),r.a.createElement("div",null,r.a.createElement(O,{banner:!0,marginTop:!1,title:"Welcome to AnhViPanDan Shop",description:"Best shop in the world"},r.a.createElement("div",{className:"container"},r.a.createElement(M,{categories:s.categories}),r.a.createElement("h2",{className:"mb-4"},"New Arrival"),r.a.createElement("div",{className:"row mb-5"},r.a.createElement("div",{className:"col-md-12 col-sm-12"},r.a.createElement("div",{className:"row"},t.length?t.slice(0,p+8).map((function(e,t){return r.a.createElement("div",{className:"col-lg-3 col-md-4 col-sm-6 mb-3",key:e._id},r.a.createElement(P,{product:e}))})):r.a.createElement("div",{className:"col-12"},"Nothing here..."),p+8<t.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{className:"btn btn-info",onClick:function(){return f(p+8)}},"Load More"))):""))),r.a.createElement("h2",{className:"mb-4"},"Best Sell"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 col-sm-12"},r.a.createElement("div",{className:"row"},a.length?a.slice(0,g+8).map((function(e,t){return r.a.createElement("div",{className:"col-lg-3 col-md-4 col-sm-6 mb-3",key:e._id},r.a.createElement(P,{product:e}))})):r.a.createElement("div",{className:"col-12"},"Nothing here..."),g+8<a.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{className:"btn btn-info",onClick:function(){return v(g+8)}},"Load More"))):""))))))})),B=a(35),z=a.n(B);var q=Object(b.b)((function(e){return{review:e.review}}),{loadReviews:x})(Object(n.memo)((function(e){var t=e.currentLocation,a=e.review,c=e.product,l=e.loadReviews,s=e.setWillReload,u=e.user,d=(Object(m.a)(e,["currentLocation","review","product","loadReviews","setWillReload","user"]),Object(n.useState)({rate:0,review:""})),p=Object(E.a)(d,2),f=p[0],h=p[1];function b(e){h(Object(C.a)(Object(C.a)({},f),{},{rate:e}))}var g=function(e){e.preventDefault(),s(!1),h({rate:0,review:""}),fetch("".concat(i,"/products/rate/").concat(c._id,"/").concat(u._id),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rate:{user:u._id,rate:f.rate,review:f.review}})}).then((function(e){return e.json().then((function(e){console.log("rateUpdate",e),l(e.rate),console.log(a)}))}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mt-5"},r.a.createElement("h5",null,"YOUR REVIEW"),u?r.a.createElement("div",{className:"person-review"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("span",null,"Vote:\xa0"),r.a.createElement(R,{size:"1.5rem",className:"py-2",childStyle:{paddingRight:"5px"},rate:f.rate,onChange:b,hover:!0})),r.a.createElement("form",{onSubmit:g},r.a.createElement("div",{className:"form-group mb-1"},r.a.createElement("textarea",{className:"form-control",value:f.review,onChange:function(e){h(Object(C.a)(Object(C.a)({},f),{},{review:e.target.value}))},placeholder:"Write your review..."})),r.a.createElement("button",{type:"submit",className:"btn btn-dark ml-auto d-block"},"Submit"))):r.a.createElement("div",{className:"bg-light rounded p-3"},"Please"," ",r.a.createElement(o.b,{to:{pathname:"/signin",state:{prevPath:"/product/"+t}}},"sign in")," ","to write your review"),r.a.createElement("h5",null,"REVIEWS"),a.length?a.map((function(e){return r.a.createElement("div",{className:"rated-view",key:e._id},r.a.createElement("p",{className:"m-0"},e.user.name),r.a.createElement(R,{rate:e.rate}),r.a.createElement("p",null,new Date(e.updatedAt).toLocaleDateString()),r.a.createElement("p",{style:{marginTop:"1rem"}},e.review?e.review:r.a.createElement("span",{className:"text-muted small font-italic"},"User didn't comment")))})):r.a.createElement("div",null,"No comment")))})));var U=Object(b.b)((function(e){return{items:e.products,review:e.review}}),{addToCart:S,removeFromCart:w,updateItems:k,loadReviews:x})(Object(n.memo)((function(e){var t=Object(n.useState)(),a=Object(E.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(0),s=Object(E.a)(o,2),m=s[0],d=s[1],p=Object(n.useState)([]),f=Object(E.a)(p,2),h=f[0],b=f[1],g=Object(n.useState)(!1),v=Object(E.a)(g,2),N=v[0],y=v[1],j=Object(n.useState)(!0),S=Object(E.a)(j,2),w=S[0],k=S[1],x=u().user;Object(n.useEffect)((function(){var t;(t=e.match.params.productId,fetch("".concat(i,"/product/").concat(t),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(t){l(t.product),e.loadReviews(t.product.rate),console.log(t.product);var a=e.items.find((function(e){return e._id===t.product._id}));d(a?a.quantity:0),y(!!a)})),function(e){return fetch("".concat(i,"/products/related/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(e.match.params.productId).then((function(e){b(e)}))}),[e.match.params.productId]);var C=function(e){e.target.checked?(T.current.innerText=" show less",A.current.className="d-inline"):(T.current.innerText=" ...read more",A.current.className="d-none",window.scrollTo(0,0))},_=I(),T=Object(n.useRef)(),A=Object(n.useRef)();return r.a.createElement(O,{key:_,reload:w,description:"Serve your needs",title:"Product Detail"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},c?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-9 col-sm-12"},r.a.createElement("div",{className:"product"},r.a.createElement("div",{className:"image-container",style:{backgroundImage:"url(".concat(i,"/product/photo/").concat(c._id,")")}}),r.a.createElement("div",{className:"info-product"},r.a.createElement("div",{className:"detail-container"},r.a.createElement("div",{className:"name-product"},r.a.createElement("h1",null,c.name)),r.a.createElement("div",{className:"price-product"},"$",r.a.createElement("span",{className:"price"}," ",c.price)),r.a.createElement("hr",null),r.a.createElement("div",{className:"detail-product"},r.a.createElement("span",{className:"detail"},c.description.slice(0,100),r.a.createElement("span",{ref:A,className:"d-none"},c.description.slice(100)),c.description.length>100?r.a.createElement("label",{className:"small text-info d-block",ref:T,htmlFor:_,style:{cursor:"pointer"}},"... Read more"):"",r.a.createElement("input",{type:"checkbox",id:_,onChange:C,hidden:!0}))),r.a.createElement("div",{className:"d-flex "},r.a.createElement("span",{className:"sold-product"},"Sold\xa0",r.a.createElement("span",{className:"sold"},c.sold)),r.a.createElement("span",{className:"category-product"},"Category\xa0",r.a.createElement("span",{className:"category"},c.category.name," "))),r.a.createElement("div",{className:"d-flex "},r.a.createElement("span",{className:"updated-product"},"Updated\xa0",r.a.createElement("span",{className:"updated"},z()(c.createdAt).fromNow())),r.a.createElement("span",{className:"availability-product"},"Availability\xa0",r.a.createElement("span",{className:"availability"},N?r.a.createElement("span",{className:"badge badge-danger"},"In Stock"):r.a.createElement("span",{className:"badge badge-warning"},"Out Stock")))),r.a.createElement("div",{className:"review-rate d-flex align-items-center"},r.a.createElement(R,{size:"1.5rem",className:"py-2",childStyle:{paddingRight:"5px"},rate:0!==c.rate.length?c.rate.reduce((function(e,t){return e+t.rate}),0)/c.rate.length:0}),r.a.createElement("span",{className:"number-review ml-3"},0!==c.rate.length?c.rate.length:0,"\xa0reviews")),r.a.createElement("div",{className:"calculate-product"},r.a.createElement("div",{className:"crement"},r.a.createElement("button",{className:"decre",onClick:function(){d(m-1<0?0:m-1),e.updateItems(c._id,m-1<0?0:m-1)}},"-"),r.a.createElement("input",{type:"number",className:"input-total",value:m,onChange:function(e){return d(e.target.value?e.target.value:0)},name:"total"}),r.a.createElement("button",{className:"incre",onClick:function(){d(m+1),e.updateItems(c._id,m+1)}},"+")),r.a.createElement("div",{className:"total-price"},"$\xa0",m*c.price)),N?r.a.createElement("button",{className:"btn-remove-card btn-buy-product",onClick:function(){e.removeFromCart(c),y(!1)}},"REMOVE FROM CART"):r.a.createElement("button",{className:"btn-buy-card btn-buy-product",onClick:function(){e.addToCart(c),y(!0)}},"Add To Card")))),r.a.createElement(q,{setWillReload:k,product:c,currentLocation:e.match.params.productId,user:x})),r.a.createElement("div",{className:"col-md-3 col-sm-12"},r.a.createElement("div",{className:"related-product"},r.a.createElement("h3",null,"Related Products"),r.a.createElement("div",{className:"row "},r.a.createElement(r.a.Fragment,null,h.map((function(e,t){return r.a.createElement("div",{className:"col-md-12 col-sm-6 mb-3",key:t},r.a.createElement(P,{product:e}))}))))))):r.a.createElement("h3",{className:"text-info col-12 text-center"},r.a.createElement("div",{className:"rounded p-3"},"Waiting...")))))}))),J=a(5);var $=Object(n.memo)((function(e){var t=e.categories,a=e.handleFilter,c=Object(n.useState)([]),l=Object(E.a)(c,2),o=l[0],s=l[1];return r.a.createElement(r.a.Fragment,null,t&&t.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement("label",{className:"form-check-label"},r.a.createElement("input",{onChange:function(){return function(e){var t=Object(J.a)(o),n=o.indexOf(e);-1!==n?t.splice(n,1):t.push(e),s(t),a(t,"category")}(e._id)},type:"checkbox",className:"form-check-input"}),e.name))})))})),V=[{id:0,array:[],name:"Any"},{id:1,array:[0,9],name:"$0 to $9"},{id:2,array:[10,19],name:"$10 to $19"},{id:3,array:[20,29],name:"$20 to $29"},{id:4,array:[30,39],name:"$30 to $39"}];var W=Object(n.memo)((function(e){var t=e.handleFilter;return r.a.createElement(r.a.Fragment,null,V.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("label",{className:"form-check-label"},r.a.createElement("input",{onChange:function(){return function(e){var a=V.find((function(t){return t.id===e}));t(a.array,"price")}(e.id)},type:"radio",name:"price",className:"form-check-input"}),e.name))})))}));var G=Object(b.b)((function(e){return{items:e.products}}),{})((function(e){var t=Object(n.useState)(),a=Object(E.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)({category:[],price:[]}),s=Object(E.a)(o,2),m=s[0],i=s[1],u=Object(n.useState)({err:"",size:0,limit:6,skip:0}),d=Object(E.a)(u,2),p=d[0],f=d[1],h=Object(n.useState)([]),b=Object(E.a)(h,2),g=b[0],v=b[1];Object(n.useEffect)((function(){D().then((function(e){l(e)})),_(p.limit,p.skip,m).then((function(e){v(e.products),f(Object(C.a)(Object(C.a)({},p),{},{size:e.size}))}))}),[]);var N=function(e,t){"category"===t?(_(p.limit,0,Object(C.a)(Object(C.a)({},m),{},{category:e})).then((function(e){v(e.products),f(Object(C.a)(Object(C.a)({},p),{},{size:e.size,skip:0}))})),i(Object(C.a)(Object(C.a)({},m),{},{category:e}))):(_(p.limit,0,Object(C.a)(Object(C.a)({},m),{},{price:e})).then((function(e){v(e.products),f(Object(C.a)(Object(C.a)({},p),{},{size:e.size,skip:0}))})),i(Object(C.a)(Object(C.a)({},m),{},{price:e})))},y=function(){_(p.limit,p.skip+p.size,Object(C.a)({},m)).then((function(e){v([].concat(Object(J.a)(g),Object(J.a)(e.products))),f(Object(C.a)(Object(C.a)({},p),{},{size:e.size,skip:p.skip+p.size}))}))};return r.a.createElement(O,{description:"Best Shop in the world",className:"container",title:"AnhViPanDan"},r.a.createElement("div",{className:"row mb-5"},r.a.createElement("div",{className:"col-md-3 col-sm-4"},r.a.createElement("h3",null,"Filter by Category"),r.a.createElement("ul",{className:"ml-5"},r.a.createElement($,{categories:c,handleFilter:N})),r.a.createElement("h3",null,"Filter by Range"),r.a.createElement("ul",{className:"ml-5"},r.a.createElement(W,{handleFilter:N}))),r.a.createElement("div",{className:"col-md-9 col-sm-8"},r.a.createElement("div",{className:"row"},g.map((function(t){return r.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-6 mb-3",key:t._id},r.a.createElement(P,{product:t,isAdded:(a=t._id,!!e.items.find((function(e){return e._id===a})))}));var a})),p.size===p.limit&&r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{className:"btn btn-info",onClick:y},"Load More")))),r.a.createElement("div",{className:"col-md-1"})))}));var Y=function(){var e=u().user,t=e.email,a=e.name,n=e._id;return r.a.createElement(O,{title:"Dashboard",description:"Hello ".concat(a)},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"card"},r.a.createElement("h4",{className:"card-header"},"Admin Links"),r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement(o.b,{className:"list-group-item",to:"/profile/update/".concat(n)},"Profile"),r.a.createElement(o.b,{className:"list-group-item",to:"/create/category"},"Categories"),r.a.createElement(o.b,{className:"list-group-item",to:"/products"},"Products"),r.a.createElement(o.b,{className:"list-group-item",to:"/orders"},"View Orders")))),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"card"},r.a.createElement("h4",{className:"card-header"},"Admin Information"),r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement("li",{className:"list-group-item"},a),r.a.createElement("li",{className:"list-group-item"},t),r.a.createElement("li",{className:"list-group-item"},"Admin")))))))};var H=function(e){e.match;var t=e.location,a=(e.history,Object(m.a)(e,["match","location","history"]),Object(n.useState)({email:"",password:"",err:"",loading:!1,redirect:!1})),c=Object(E.a)(a,2),l=c[0],d=c[1],p=function(e){var t=e.target;d(Object(C.a)(Object(C.a)({},l),{},Object(F.a)({},t.name,t.value)))},f=function(e){e.preventDefault();var t=l.email,a=l.password;d(Object(C.a)(Object(C.a)({},l),{},{err:"",loading:!0})),function(e){var t=e.email,a=e.password;return fetch("".concat(i,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}({email:t,password:a}).then((function(e){e.err?d(Object(C.a)(Object(C.a)({},l),{},{loading:!1,err:e.err})):(!function(e){"undefined"!==typeof window&&localStorage.setItem("jwt",JSON.stringify(e))}(e),d({email:"",password:"",err:"",loading:!1,redirect:!0}))}))},h=u().user,b=h?0===h.role?r.a.createElement(s.a,{to:"/user/dashboard"}):r.a.createElement(s.a,{to:"/admin/dashboard"}):"";return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{title:"Sign In",description:"You already have account ?",className:"container offset-3 col-md-6"},l.err?r.a.createElement("h3",{className:"text-danger"},l.err):"",l.loading?r.a.createElement("h3",{className:"text-info"},"Loading ..."):"",r.a.createElement("form",{onSubmit:f},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"email",value:l.email,name:"email",onChange:p,className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",value:l.password,name:"password",onChange:p,className:"form-control"})),r.a.createElement("div",null,"Have no account, ",r.a.createElement(o.b,{to:"/signup"},"sign up")),r.a.createElement("button",{type:"submit",className:"btn btn-block mt-2"},"Sign In")),l.redirect?t.state?r.a.createElement(s.a,{to:"".concat(t.state.prevPath)}):b:""))};var X=function(){var e=Object(n.useState)({name:"",email:"",password:"",err:"",success:!1}),t=Object(E.a)(e,2),a=t[0],c=t[1],l=function(e){var t=e.target;c(Object(C.a)(Object(C.a)({},a),{},Object(F.a)({},t.name,t.value)))},s=function(e){e.preventDefault(),function(e){var t=e.name,a=e.email,n=e.password;return fetch("".concat(i,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,email:a,password:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}({name:a.name,email:a.email,password:a.password}).then((function(e){e.err?c(Object(C.a)(Object(C.a)({},a),{},{success:!1,err:e.err})):c({name:"",email:"",password:"",err:"",success:!0})}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{title:"Sign Up",description:"Create new account",className:"container offset-3 col-md-6"},a.err?r.a.createElement("h3",{className:"text-danger"},a.err):"",a.success?r.a.createElement("h3",{className:"text-success"},"Sign up success! Please ",r.a.createElement(o.b,{to:"/signin"},"Sign In"),"."):"",r.a.createElement("form",{onSubmit:s},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Name"),r.a.createElement("input",{type:"text",name:"name",value:a.name,onChange:l,className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"email",value:a.email,name:"email",onChange:l,className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",value:a.password,name:"password",onChange:l,className:"form-control"})),r.a.createElement("div",null,"Already have account, ",r.a.createElement(o.b,{to:"/signin"},"sign in")),r.a.createElement("button",{type:"submit",className:"btn btn-block mt-2"},"Sign Up"))))};var K=function(){var e=u().user,t=e.email,a=e.name,n=e._id;return r.a.createElement(O,{title:"Dashboard",description:"Hello ".concat(a)},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"card"},r.a.createElement("h4",{className:"card-header"},"User Links"),r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement(o.b,{className:"list-group-item",to:"/profile/update/".concat(n)},"Profile"),r.a.createElement(o.b,{className:"list-group-item",to:"/cart"},"My Cart")))),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"card"},r.a.createElement("h4",{className:"card-header"},"User Information"),r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement("li",{className:"list-group-item"},a),r.a.createElement("li",{className:"list-group-item"},t),r.a.createElement("li",{className:"list-group-item"},"Registered User")))))))};var Q=Object(b.b)((function(e){return{items:e.products,orders:e.order}}),{loadOrders:function(e){return function(t){return t({type:"LOAD_ORDERS",payload:e})}}})((function(e){var t=e.orders,a=e.loadOrders,c=(e.items,Object(m.a)(e,["orders","loadOrders","items"]),u()),l=c.user,s=c.token;return Object(n.useEffect)((function(){(function(e,t){return fetch("".concat(i,"/order/get/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(l._id,s).then((function(e){e.err||(a(e.orders),console.log(e.orders))}))}),[]),r.a.createElement(O,{title:"Orders",description:"Manage orders from user",className:"container"},r.a.createElement("div",{className:"row no-gutters",style:{fontFamily:"Raleway,san-serif"}},r.a.createElement("h3",null,"ORDERS"),r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("thead",{style:{fontWeight:"700"}},r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"User"),r.a.createElement("th",null,"Total"),r.a.createElement("th",null,"Paid"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("th",null,e._id),r.a.createElement("th",null,e.user.name),r.a.createElement("th",null,"$",e.amount),r.a.createElement("th",null,new Date(e.createdAt).toLocaleString()),r.a.createElement("th",null,e.status),r.a.createElement("th",null,r.a.createElement(o.b,{to:"/order/".concat(e._id)},"Detail"),r.a.createElement("span",{className:"text-danger ml-3",style:{cursor:"pointer"},onClick:function(){return n=e._id,fetch("".concat(i,"/order/delete/").concat(n,"/").concat(l._id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}}),void a(t.filter((function(e){return e._id!==n})));var n}},"Delete")))}))))))}));var Z=Object(b.b)((function(e){return{items:e.products}}),{})((function(e){e.items;var t=Object(m.a)(e,["items"]),a=Object(n.useState)(),c=Object(E.a)(a,2),l=c[0],s=c[1],d=Object(n.useState)(),p=Object(E.a)(d,2),f=p[0],h=p[1],b=Object(n.useState)(""),g=Object(E.a)(b,2),v=g[0],N=g[1],y=Object(n.useState)(!1),j=Object(E.a)(y,2),S=j[0],w=j[1];Object(n.useEffect)((function(){(function(e,t){return fetch("".concat(i,"/order/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(k,C).then((function(e){s(e.order),N(e.order.status),console.log(e.order)})),fetch("".concat(i,"/order/status"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){console.log("data err",e),h(e.status)})),console.log(S)}),[]);var k=t.match.params.orderId,x=u(),C=x.token,_=x.user,T=function(){(function(e,t,a,n){return fetch("".concat(i,"/order/set-status/").concat(t,"/").concat(e),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({status:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(_._id,k,C,v).then((function(e){return w(!0)}))};return r.a.createElement(O,{title:"Detail order",description:"Manage orders from user",className:"container"},r.a.createElement("div",{className:"row",style:{fontFamily:"Raleway,san-serif"}},r.a.createElement("div",{className:"col-md-8 col-sm-12"},r.a.createElement("h3",null,"Products"),l?l.products.map((function(e){return t=e,r.a.createElement("div",{className:"d-flex py-2 ",key:t._id,style:{fontFamily:"Raleway, sans-serif",padding:"0 1rem",alignItems:"center",borderBottom:"1px solid gray",margin:"1rem 0"}},r.a.createElement(o.b,{to:{pathname:"/product/".concat(t._id)},className:"image-container-cart"},r.a.createElement("img",{src:"".concat(i,"/product/photo/").concat(t._id),className:"image-product-cart",alt:t.name})),r.a.createElement("div",{className:"info-product-cart info-product-order"},r.a.createElement("p",{className:"product-name-cart"},t.name),r.a.createElement("p",{className:"product-price-cart"},"$",r.a.createElement("span",null,t.price))),r.a.createElement("div",{className:"quantity-order"},t.quantity,"\xa0items"),r.a.createElement("div",{className:"total-order text-center"},"$\xa0",t.price*t.quantity));var t})):"",r.a.createElement("div",{className:"total-price-cart",style:{fontWeight:"100"}},r.a.createElement("p",null,"Total:\xa0$",l?l.amount:0))),r.a.createElement("div",{className:"col-md-4 col-sm-12"},r.a.createElement("h3",null,"Shipping"),r.a.createElement("table",{className:"table table-bordered mt-3"},r.a.createElement("tbody",{style:{fontWeight:"500"}},r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,l?l.user.name:"waiting...")),r.a.createElement("tr",null,r.a.createElement("th",null,"Address"),r.a.createElement("th",null,l?l.address:"waiting...")),r.a.createElement("tr",null,r.a.createElement("th",null,"Contact"),r.a.createElement("th",null,l?l.sdt:"waiting...")),r.a.createElement("tr",null,r.a.createElement("th",null,"Paid"),r.a.createElement("th",null,l?new Date(l.createdAt).toLocaleString():"waiting...")),1===_.role?r.a.createElement("tr",null,r.a.createElement("th",null,"Status"),r.a.createElement("th",null,r.a.createElement("select",{value:v,onChange:function(e){N(e.target.value),console.log(e.target.value)}},f?f.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})):"waiting..."))):r.a.createElement("tr",null,r.a.createElement("th",null,"Status"),r.a.createElement("th",null,l?l.status:"waiting...")))),1===_.role?S?r.a.createElement("button",{className:"btn btn-success btn-block save-change",onClick:T},"Save change\xa0",S?r.a.createElement("span",null,"\u2713"):""):r.a.createElement("button",{className:"btn btn-dark btn-block save-change",onClick:T},"Save change\xa0"):"")))}));var ee=Object(b.b)((function(e){return{items:e.products}}),{})((function(e){Object.assign({},e);var t=Object(n.useState)([]),a=Object(E.a)(t,2),c=a[0],l=a[1],s=function(){(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desc",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return fetch("".concat(i,"/products?sortBy=").concat(e,"&order=").concat(t,"&limit=").concat(a),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})("sold").then((function(e){l(Object(J.a)(e))}))},m=u(),d=m.user,p=m.token;Object(n.useEffect)((function(){s()}),[]);var f=function(e){!function(e,t,a){fetch("".concat(i,"/product/").concat(t,"/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(d._id,e,p),l(c.filter((function(t){return t._id!==e})))};return r.a.createElement(O,{description:"Manage all products",className:"container"},r.a.createElement("div",{className:"row no-gutters",style:{fontFamily:"Raleway,san-serif"}},r.a.createElement("div",{className:"col-12 d-flex justify-content-between"},r.a.createElement("h3",null,"Products"),r.a.createElement(o.b,{to:"/create/product"},r.a.createElement("button",{className:"btn btn-dark"},"Create"))),r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("thead",{style:{fontWeight:"700"}},r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,c.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("th",null,e._id),r.a.createElement("th",null,e.name),r.a.createElement("th",null,e.price),r.a.createElement("th",null,e.category.name),r.a.createElement("th",null,r.a.createElement("span",{className:"text-danger",onClick:function(){return f(e._id)},style:{cursor:"pointer"}},"delete")))}))))))}));var te=function(){var e=Object(n.useState)({name:"",email:"",password:"",confirm:""}),t=Object(E.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(),s=Object(E.a)(l,2),m=s[0],d=s[1],p=Object(n.useState)({err:"",success:!1}),f=Object(E.a)(p,2),h=f[0],b=f[1],g=u(),v=g.user,N=g.token,y=a.name,j=a.email,S=a.password,w=a.confirm,k=h.err,x=h.success;Object(n.useEffect)((function(){(function(e,t){return fetch("".concat(i,"/user/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(v._id,N).then((function(e){e.err||(d(e.user),c(Object(C.a)(Object(C.a)({},a),{},{name:e.user.name,email:e.user.email})))}))}),[]);var _=function(e){c(Object(C.a)(Object(C.a)({},a),{},Object(F.a)({},e.target.name,e.target.value)))};return r.a.createElement(O,{title:"Profile",description:"Update your profile",className:"container"},r.a.createElement("div",{className:"row",style:{fontFamily:"Raleway,san-serif"}},r.a.createElement("div",{className:"col-md-4 col-sm-8"},r.a.createElement("h3",null,"USER PROFILE"),x?r.a.createElement("h5",{className:"text-success"},"Update success"):"",k?r.a.createElement("h5",{className:"text-danger"},k):"",r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),b({err:"",success:!1}),!j||!S)return b({err:"Field require",success:!1});(function(e,t,a){return fetch("".concat(i,"/user/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(v._id,N,a).then((function(e){console.log(e),e.err?b({success:!1,err:e.err}):b({err:"",success:!0})}))}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"d-block"},"Name",r.a.createElement("input",{type:"text",name:"name",className:"form-control",value:y,onChange:_}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"d-block"},r.a.createElement("span",{className:"text-danger"},"!")," Email",r.a.createElement("input",{type:"text",name:"email",className:"form-control",value:j,onChange:_}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"d-block"},r.a.createElement("span",{className:"text-danger"},"!")," Password",r.a.createElement("input",{type:"password",name:"password",className:"form-control",value:S,onChange:_}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"d-block"},"New password",r.a.createElement("input",{type:"password",name:"confirm",className:"form-control",value:w,onChange:_}))),r.a.createElement("button",{type:"submit",className:"btn btn-dark"},"UPDATE"))),r.a.createElement("div",{className:"col-md-8 col-sm-12"},r.a.createElement("h3",null,"MY ORDERS"),r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("thead",{style:{fontWeight:"700"}},r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Total"),r.a.createElement("th",null,"Paid"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null))),r.a.createElement("tbody",null,m?m.history.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("th",null,e._id),r.a.createElement("th",null,"$",e.amount),r.a.createElement("th",null,new Date(e.createdAt).toLocaleString()),r.a.createElement("th",null,e.status),r.a.createElement("th",null,r.a.createElement(o.b,{to:"/order/".concat(e._id)},"Detail")))})):"")))))};var ae=function(){var e=Object(n.useState)({name:"",err:!1,success:!1}),t=Object(E.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),s=Object(E.a)(l,2),m=s[0],d=s[1];Object(n.useEffect)((function(){fetch("".concat(i,"/categories"),{method:"GET"}).then((function(e){return e.json().then((function(e){d(e),console.log(e)}))}))}),[]);var p=u(),f=p.user,h=p.token,b=function(e){c(Object(C.a)(Object(C.a)({},a),{},{name:e.target.value}))},g=function(e){e.preventDefault(),function(e,t,a){return fetch("".concat(i,"/category/create/").concat(e),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({name:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(f._id,h,a.name).then((function(e){e.err?c({name:"",err:e.err,success:!1}):(c({name:"",err:!1,success:!0}),d([].concat(Object(J.a)(m),[e.category])))}))};return r.a.createElement(O,{title:"Add category",description:"Ready to add new category?",className:"container"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-md-4 col-sm-12"},r.a.createElement("form",{onSubmit:g},a.err?r.a.createElement("h3",{className:"text-danger"},a.err):"",r.a.createElement("div",{className:"form-group"},r.a.createElement("h3",null,"Create Category"),r.a.createElement("input",{type:"text",id:"name",autoFocus:!0,onChange:b,className:"form-control no-outline",value:a.name})),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary"},"Create Category"))),r.a.createElement("div",{className:"col-md-8 col-sm-12 d-flex justify-content-between"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row no-gutters"},r.a.createElement("div",{className:"col-12 d-flex justify-content-between"},r.a.createElement("h3",null,"Products"),r.a.createElement(o.b,{to:"/create/product"},r.a.createElement("button",{className:"btn btn-dark"},"Create"))),r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("thead",{style:{fontWeight:"700"}},r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Created At"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,m.map((function(e){return r.a.createElement("tr",{key:e._id},r.a.createElement("th",null,e._id),r.a.createElement("th",null,e.name),r.a.createElement("th",null,new Date(e.createdAt).toLocaleString()),r.a.createElement("th",null,r.a.createElement("span",{className:"text-danger",onClick:function(){return t=e._id,fetch("".concat(i,"/category/").concat(t,"/").concat(f._id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}}).then((function(e){e.err&&c(Object(C.a)(Object(C.a)({},a),{},{err:e.err}))})),void d(m.filter((function(e){return e._id!==t})));var t},style:{cursor:"pointer"}},"delete")))})))))))))},ne=a(25),re=a.n(ne),ce=a(36);var le=function(){var e=Object(n.useState)({name:"",description:"",price:0,categories:[],category:"",quantity:0,sold:0,photo:"",err:"",redirect:!1,success:!1,formData:""}),t=Object(E.a)(e,2),a=t[0],c=t[1],l=a.name,o=a.description,s=a.price,m=a.categories,d=a.quantity,p=a.sold,f=a.formData,h=function(){var e=Object(ce.a)(re.a.mark((function e(){var t;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:t=e.sent,console.log(t),c(Object(C.a)(Object(C.a)({},a),{},{categories:t,formData:new FormData}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){h()}),[]);var b=u(),g=b.user,v=b.token,N=function(e){var t=e.target,n=t.name,r="photo"===n?t.files[0]:t.value;f.set(n,r),c(Object(C.a)(Object(C.a)({},a),{},Object(F.a)({},n,r)))},y=function(e){e.preventDefault(),0===d&&f.set("quantity",0),0===p&&f.set("sold",0),0===s&&f.set("price",0),function(e,t,a){return fetch("".concat(i,"/product/create/").concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:a}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(g._id,v,f).then((function(e){e.err?c(Object(C.a)(Object(C.a)({},a),{},{err:e.err,success:!1})):c(Object(C.a)(Object(C.a)({},a),{},{err:!1,success:!0})),window.scrollTo(0,0),console.log(f)}))};return r.a.createElement(O,{title:"Add Product",description:"Ready to add new product!"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"col-md-6 offset-md-3",style:{marginBottom:"20vh"}},r.a.createElement("form",{onSubmit:y},a.err?r.a.createElement("h3",{className:"text-danger"},a.err):"",a.success?r.a.createElement("h3",{className:"text-success"},"Add ","".concat(l)," success!"):"",r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Name"),r.a.createElement("input",{type:"text",name:"name",className:"form-control",onChange:N,value:l})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Description"),r.a.createElement("textarea",{rows:"5",name:"description",className:"form-control",onChange:N,value:o})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Price"),r.a.createElement("input",{type:"number",name:"price",className:"form-control",onChange:N,value:s})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Sold"),r.a.createElement("input",{type:"number",name:"sold",className:"form-control",onChange:N,value:p})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Quantity"),r.a.createElement("input",{type:"number",name:"quantity",className:"form-control",onChange:N,value:d})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Category"),r.a.createElement("select",{type:"number",name:"category",className:"form-control",onChange:N},r.a.createElement("option",{selected:!0,disabled:!0},"Select"),m.map((function(e,t){return r.a.createElement("option",{value:e._id,key:t},e.name)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Photo"),r.a.createElement("input",{type:"file",name:"photo",className:"form-control bg-secondary text-light",onChange:N})),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary"},"Create Product")))))},oe=Object(b.b)((function(e){return{}}),{loadItemsLocalstorage:function(){return function(e,t){var a=JSON.parse(localStorage.getItem("cart"));e({type:"LOAD_ITEMS",payload:a||[]})}}})((function(e){return Object(n.useEffect)((function(){return e.loadItemsLocalstorage()}),[e]),r.a.createElement(o.a,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0,component:L}),r.a.createElement(s.b,{path:"/shop",component:G}),r.a.createElement(s.b,{path:"/signin",component:H}),r.a.createElement(s.b,{path:"/signup",component:X}),r.a.createElement(p,{path:"/user/dashboard"},r.a.createElement(K,null)),r.a.createElement(d,{path:"/admin/dashboard"},r.a.createElement(Y,null)),r.a.createElement(d,{path:"/create/category"},r.a.createElement(ae,null)),r.a.createElement(d,{path:"/create/product"},r.a.createElement(le,null)),r.a.createElement(d,{path:"/products",component:ee}),r.a.createElement(d,{path:"/orders"},r.a.createElement(Q,null)),r.a.createElement(s.b,{path:"/product/:productId",component:U}),r.a.createElement(s.b,{path:"/cart",component:A}),r.a.createElement(p,{path:"/profile/update/:userId",component:te}),r.a.createElement(d,{path:"/order/:orderId",component:Z})))})),se=a(26),me=a(13),ie=[],ue=[],de=[],pe=[],Ee=[],fe=Object(me.c)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":return[].concat(Object(J.a)(e),[t.payload]);case"REMOVE_FROM_CART":case"UPDATE_ITEMS":case"LOAD_ITEMS":return Object(J.a)(t.payload);case"RESET_ITEMS":return t.payload;default:return e}},arrival:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ARRIVAL_ITEMS":return Object(J.a)(t.payload);default:return e}},sell:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELL_ITEMS":return Object(J.a)(t.payload);default:return e}},review:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_REVIEWS":return Object(J.a)(t.payload);default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_ORDERS":return Object(J.a)(t.payload);default:return e}}}),he=Object(me.e)(fe,Object(me.d)(Object(me.a)(se.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__():Object(me.a)(se.a)));l.a.render(r.a.createElement(b.a,{store:he},r.a.createElement(oe,null)),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.402ae782.chunk.js.map